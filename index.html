<!DOCTYPE html>
<html>
<head>
	<title>Rock Paper Scissors</title>
</head>
<body>
	<button id="rock">Rock</button>
	<button id="paper">Paper</button>
	<button id="scissors">Scissors</button>
	<button id="reset">Reset</button>
	<div id="rd"></div>
	<div id="sc"></div>
	<script>
		let result;
		let playerScore = 0;
		let computerScore = 0;
		
		//Add results section
		const round = document.createElement('p');
		round.textContent = "Choose Rock, Paper or Scissors to begin a game!"
		const rd = document.querySelector('#rd');
		rd.appendChild(round);

		//Add score sections
		const cscore = document.createElement('p');
		cscore.textContent = "Computer: " + computerScore;
		const pscore = document.createElement('p');
		pscore.textContent = "You: " + playerScore;
		const sc = document.querySelector('#sc');
		sc.appendChild(pscore);
		sc.insertBefore(cscore, pscore);

		//Generate the computer selection
		function computerPlay() {
			let x = Math.floor((Math.random() * 3) + 1); 
			if(x == 1) {
				return "rock";
			} else if(x == 2) {
				return "paper";
			} else {
				return "scissors";
			}
		}

		//Play one round of Rock, Paper, Scissors
		function playRound(playerSelection, computerSelection) {
			//Compare inputs and play one round
			if(playerSelection == "rock" && computerSelection == "scissors") {
				result = "You won! Rock beats scissors";
			} else if(playerSelection == "rock" && computerSelection == "paper") {
				result = "You lost! Paper beats rock";
			} else if(playerSelection == "paper" && computerSelection == "scissors") {
				result = "You lost! Scissors beats paper";
			} else if(playerSelection == "paper" && computerSelection == "rock") {
				result = "You won! Paper beats rock";
			} else if(playerSelection == "scissors" && computerSelection == "paper") {
				result = "You won! Scissors beats paper";
			} else if(playerSelection == "scissors" && computerSelection == "rock") {
				result = "You lost! Rock beats scissors";
			} else if(playerSelection == computerSelection) {
				result = "Tie! Try again";
			} else {
				result = "Invalid input. Try again";
			}
		}

		//Play a full game of 5 rounds
		function game() {
			if (playerScore < 5 && computerScore < 5) {
				if (result.search("won") >= 0) {
					playerScore++;
				} else if (result.search("lost") >= 0) {
					computerScore++;
				}
			} else if (playerScore == 5) {
				result = "You win! Game over.";
			} else {
				result = "Computer wins! Game over.";
			}
		}

		var btn = document.querySelectorAll('button');
		btn.forEach( (button) => {
			button.addEventListener('click', (e) => {
				playerSelection = button.id;
				computerSelection = computerPlay();
				console.log(playerSelection);
				console.log(computerSelection);
				playRound(playerSelection, computerSelection);
				game();

				//Display result
				round.textContent = result;
				pscore.textContent = "You: " + playerScore;
				cscore.textContent = "Computer: " + computerScore;
			});
		});
	</script>
</body>
</html>